---
title: ""
emoji: "ğŸ’¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

# ã¯ã˜ã‚ã«
Rails åˆå­¦è€…ã®PHPerã§ã™ã€‚
ActiveModel ã«ã¤ã„ã¦å­¦ã‚“ã§ã„ãŸéš›ã«ã€Model ã¨ã€€API ã®é•ã„ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã‚‚ã‚ˆãåˆ†ã‹ã‚‰ãªã‹ã£ãŸã®ã§èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚

# ã‚ˆãåˆ†ã‹ã‚‰ãªã‹ã£ãŸéƒ¨åˆ†
(å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)[https://edgeguides.rubyonrails.org/active_model_basics.html#model]ã§ã‚ˆãåˆ†ã‹ã‚‰ãªã‹ã£ãŸéƒ¨åˆ†ã‚’å¼•ç”¨ã—ã¾ã™ã€‚

>When including ActiveModel::Model you get all the features from ActiveModel::API.
ï¼ˆ`ActiveModel::Model`ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ã§ã€`ActiveModel::API`ãŒæä¾›ã™ã‚‹ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ï¼‰


# Rails ã®ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã¦ã¿ã‚‹
`ActiveModel::API`ã¨`ActiveModel::Model`ã®ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚

ã¾ãšã¯[ActiveModel::API](https://github.com/p8/rails/blob/main/activemodel/lib/active_model/api.rb)ã§ã™ã€‚

```ruby: rails/activemodel/lib/active_model/api.rb
module ActiveModel
  # ã‚³ãƒ¡ãƒ³ãƒˆéƒ¨åˆ†ã¯çœç•¥
  module API
    extend ActiveSupport::Concern
    include ActiveModel::AttributeAssignment
    include ActiveModel::Validations
    include ActiveModel::Conversion

    included do
      extend ActiveModel::Naming
      extend ActiveModel::Translation
    end

    def initialize(attributes = {})
      assign_attributes(attributes) if attributes

      super()
    end

    def persisted?
      false
    end
  end
end
```

æ¬¡ã«[ActiveModel::Model](https://github.com/p8/rails/blob/main/activemodel/lib/active_model/model.rb)ã§ã™ã€‚

# Model
```ruby: rails/activemodel/lib/active_model/model.rb
module ActiveModel
  # ã‚³ãƒ¡ãƒ³ãƒˆéƒ¨åˆ†ã¯çœç•¥
  module Model
    extend ActiveSupport::Concern
    include ActiveModel::API
  end
end
```

# ç–‘å•ç‚¹
ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€`ActiveModel::Model`ã§ã¯`ActiveModel::API`ãŒ`include`ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ä½¿ç”¨ã™ã‚‹éš›ã¯ã©ã¡ã‚‰ã‚’`include`ã—ã¦ã‚‚å‹•ä½œã«å·®ç•°ã¯ãªã„ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚
è©¦ã—ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å…ƒã«å®Ÿè¡Œã—ã¦ã¿ã¾ã—ãŸãŒå‹•ä½œã«å·®ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

èª¿ã¹ã¦ã¿ã‚‹ã¨ã€`ActiveModel::API`ãŒå®Ÿè£…ã•ã‚ŒãŸã®ã¯ã€Rails ã®7ç³»ã‹ã‚‰ã®ã‚ˆã†ã§ã™ã€‚
ãªãœã€ã“ã®ã‚ˆã†ãªå®Ÿè£…ã‚’ã—ãŸã‹ã¯ä¸‹è¨˜ã«æ›¸ã‹ã‚Œã¦ã¾ã—ãŸã€‚
https://github.com/rails/rails/pull/43223

# ã•ã„ã”ã«
ã‚½ãƒ¼ã‚¹ã®ã‚³ãƒ¡ãƒ³ãƒˆéƒ¨åˆ†ã«ã€ä½¿ã„æ–¹ãŒæ›¸ã„ã¦ã‚ã£ãŸ

















>When including ActiveModel::API you get some features like:
ActiveModel::API ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

model name introspection
conversions
translations
validations

It also gives you the ability to initialize an object with a hash of attributes, much like any Active Record object.
ã¾ãŸã€Active Record ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨åŒæ§˜ã«ã€å±æ€§ã®ãƒãƒƒã‚·ãƒ¥ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆæœŸåŒ–ã™ã‚‹æ©Ÿèƒ½ã‚‚æä¾›ã•ã‚Œã¾ã™ã€‚

>Any class that includes ActiveModel::API can be used with form_with, render and any other Action View helper methods, just like Active Record objects.
ActiveModel::API ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹ã¯ Active Record ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨åŒæ§˜ã« form_withã€renderã€ãã®ä»–ã® Action View ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã¨ä¸€ç·’ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚